<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>

  <body>
    <div class="Vue的数据双向绑定">
      Vue.js 通过object.defineProperty()为各个属性定义get， set 特性方法，
      在数据发生改变时给订阅者发布消息，触发相应的监听回调。 1：
      对需要观察的数据对象进行递归遍历， 包括子属性对象的属性， 设置set和get
      特性方法， 当这个对象的某个值赋值时 ， 会触发绑定 的set的特性方法，
      在数据发生改变时给订阅者发布消息，触发相应的监听回调。 2： 用compile
      解析模板指令， 将模板中的变量替换成数据 ， 然后初始化渲染页面视图 ，
      并将每个指令对应的节点绑定更新函数， 添加监听数据的订阅者，一旦数据有变动
      ， 就会收到通知， 并更新视图 3：Watcher 订阅者是Observer 和Compile
      之间通信的桥梁， 主要功能如下： 在自身实例化时， 向属性订阅器（DEP）
      里面添加自己 自身必须要有一个Update方法
      在dep.notice（）发布通知时，能调用自身的update方法， 并触发Compile
      中绑定的回调函数 MVVM 是数据绑定入口 ， 整合了Observer ， Compile ，
      Watcher ，三者 ， 通过Observer来监听自己的model 数据变化，
      通过Compile来解析编译模板指令， 最终利用Watcher 搭起Observer 和Compile
      之间的通信桥梁 ， 达到数据变化通知视图 更新的效果 ， 利用视图交互，
      变化更新数据 model 变更的双向绑定效果
    </div>
    <div class="app">
      <input type="text" id="aa" />
      <p id="bb">{{ msg }}</p>
    </div>

    <!-- <script>
      var obj ={}
      Object.defineProperty(obj ,'msg' , {
        set:function(val){
          document.getElementById('aa').value = val
          document.getElementById('bb').innerHTML = val
        }
      })
    document.getElementById('aa').onkeyup=function(e){
      obj.msg = e.target.value
    }
    obj.msg = ''
    
    
    </script> -->
  </body>
</html>
